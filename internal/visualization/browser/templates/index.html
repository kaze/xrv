{{define "content"}}
<div class="container">
    <h1>XRV</h1>
    <p class="subtitle">Exchange Rate Visualizer - Interactive Mode</p>

    {{template "form" .}}

    <iframe id="chartFrame"
            style="width: 100%; min-height: 900px; border: none; border-radius: 12px; background: white;"
            title="Exchange Rate Visualization">
    </iframe>
</div>

<script>
    const today = new Date();
    const ninetyDaysAgo = new Date();
    ninetyDaysAgo.setDate(today.getDate() - 90);

    document.getElementById('to').valueAsDate = today;
    document.getElementById('from').valueAsDate = ninetyDaysAgo;

    function loadVisualization(event) {
        event.preventDefault();

        const form = document.getElementById('vizForm');
        const formData = new FormData(form);
        const params = new URLSearchParams(formData);

        document.getElementById('chartFrame').src = '/visualize?' + params.toString();
    }

    window.addEventListener('load', function() {
        document.getElementById('vizForm').dispatchEvent(new Event('submit'));
    });
</script>
{{end}}
